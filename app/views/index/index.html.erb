<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-6">
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">Current Lab Referrals Issued</h3>
                      </div>
                      <div class="panel-body">
                        <table class="table table-bordered">
                          <thead>
                            <th>Type</th>
                            <th>Next Due</th>
                            <th>Completed On</th>
                          </thead>
                          <% current_user.lab_requests.order(due_date: :desc).each do |lab| %>
                            <tr>
                              <td><%= link_to lab.request_file do %><%= lab.name %><% end %></a></td>
                              <td><%= lab.due_date %></td>
                              <td><%= lab.completed_at %></td>
                            </tr>
                          <% end %>
                        </table>
                      </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">Ldl Result History</h3>
                      </div>
                      <div class="panel-body">
                        <div>
                          <div>
                            <canvas id="canvas" height="450" width="600"></canvas>
                          </div>
                        </div>


                      <script>
                        var randomScalingFactor = function(){ return Math.floor(Math.random() * (200 - 80)) + 80};
                        var lineChartData = {
                          labels : ["Jan 15, 2015","Apr 15, 2015","Jun 15, 2015","Oct 15, 2015","Dec 15, 2015","Jan 15, 2016","Apr 15, 2016"],
                          datasets : [
                            {
                              label: "Result",
                              fillColor : "rgba(120,120,220,0.2)",
                              strokeColor : "rgba(120,120,220,1)",
                              pointColor : "rgba(120,120,220,1)",
                              pointStrokeColor : "#fff",
                              pointHighlightFill : "#fff",
                              pointHighlightStroke : "rgba(220,220,220,1)",
                              data : [randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
                            },
                            {
                              label: "Optimal",
                              fillColor : "rgba(151,187,205,0)",
                              strokeColor : "rgba(151,0,0,1)",
                              pointColor : "rgba(151,187,205,0)",
                              pointStrokeColor : "#fff",
                              pointHighlightFill : "#fff",
                              pointHighlightStroke : "rgba(151,187,205,1)",
                              data : [100,100,100,100,100,100,100]
                            },
                            {
                              label: "High",
                              fillColor : "rgba(151,187,205,0)",
                              strokeColor : "rgba(151,0,0,1)",
                              pointColor : "rgba(151,187,205,0)",
                              pointStrokeColor : "#fff",
                              pointHighlightFill : "#fff",
                              pointHighlightStroke : "rgba(151,187,205,1)",
                              data : [130,130,130,130,130,130,130]
                            }
                          ]
                        }

                        var randomScalingFactor = function(){ return Math.floor(Math.random() * (80 - 45)) + 45};
                        var lineChartData2 = {
                          labels : ["Jan 15, 2015","Apr 15, 2015","Jun 15, 2015","Oct 15, 2015","Dec 15, 2015","Jan 15, 2016","Apr 15, 2016"],
                          datasets : [
                            {
                              label: "Result",
                              fillColor : "rgba(120,220,120,0.2)",
                              strokeColor : "rgba(120,220,120,1)",
                              pointColor : "rgba(120,220,120,1)",
                              pointStrokeColor : "#fff",
                              pointHighlightFill : "#fff",
                              pointHighlightStroke : "rgba(220,220,220,1)",
                              data : [randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
                            },
                            {
                              label: "Optimal",
                              fillColor : "rgba(151,187,205,0)",
                              strokeColor : "rgba(151,0,0,1)",
                              pointColor : "rgba(151,187,205,0)",
                              pointStrokeColor : "#fff",
                              pointHighlightFill : "#fff",
                              pointHighlightStroke : "rgba(151,187,205,1)",
                              data : [40,40,40,40,40,40,40]
                            },
                            {
                              label: "High",
                              fillColor : "rgba(151,187,205,0)",
                              strokeColor : "rgba(151,0,0,1)",
                              pointColor : "rgba(151,187,205,0)",
                              pointStrokeColor : "#fff",
                              pointHighlightFill : "#fff",
                              pointHighlightStroke : "rgba(151,187,205,1)",
                              data : [60,60,60,60,60,60,60]
                            }
                          ]

                        }

                      window.onload = function(){
                        var ctx = document.getElementById("canvas").getContext("2d");
                        window.myLine = new Chart(ctx).Line(lineChartData, {
                          responsive: true
                        });
                        var ctx2 = document.getElementById("canvas2").getContext("2d");
                        window.myLine = new Chart(ctx2).Line(lineChartData2, {
                          responsive: true
                        });
                      }


                      </script>
                      </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6"></div>
                <div class="col-md-6">
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">Hdl Result History</h3>
                      </div>
                      <div class="panel-body">
                        <div>
                          <div>
                            <canvas id="canvas2" height="450" width="600"></canvas>
                          </div>
                        </div>
                      </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
